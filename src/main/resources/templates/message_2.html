<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="UTF-8">
    <title>添加</title>
    <link rel="stylesheet" href="../css/base.css">
    <link rel="stylesheet" href="../css/scennic.css">
    <link rel="stylesheet" href="../bt4/css/bootstrap.css">
    <link rel="stylesheet" href="../font/iconfont.css">

    <link rel="stylesheet" href="KindEditor/themes/default/default.css"/>
    <link rel="stylesheet" href="KindEditor/themes/simple/simple.css"/>
    <script charset="utf-8" src="KindEditor/kindeditor-all.js"></script>
    <script charset="utf-8" src="KindEditor/lang/zh-CN.js"></script>

    <script>
        function fanhui() {
            window.history.back();//返回
        }
    </script>
    <script>
        //关闭过滤模式，保留所有标签
        KindEditor.options.filterMode = false;
        KindEditor.ready(function (K) {
            window.editor = K.create('#editor_id', {
                themeType: 'default', //定义主题风格，default，simple
                /*items:[ //定义显示的菜单图标
                    'source', '|', 'undo', 'redo', '|', 'preview', 'print', 'template', 'code', 'cut', 'copy', 'paste',
                    'plainpaste', 'wordpaste', '|', 'justifyleft', 'justifycenter', 'justifyright',
                    'justifyfull', 'insertorderedlist', 'insertunorderedlist', 'indent', 'outdent', 'subscript',
                    'superscript', 'clearhtml', 'quickformat', 'selectall', '|', 'fullscreen', '/',
                    'formatblock', 'fontname', 'fontsize', '|', 'forecolor', 'hilitecolor', 'bold',
                    'italic', 'underline', 'strikethrough', 'lineheight', 'removeformat', '|', 'image', 'multiimage',
                    'table', 'hr', 'emoticons', 'baidumap', 'pagebreak',
                    'anchor', 'link', 'unlink'
            	],*/
                items: [ //定义显示的菜单图标
                    'fontsize', '|', 'forecolor', 'hilitecolor', 'bold',
                    'italic', 'underline', 'removeformat', '|', 'justifyleft',
                    'justifycenter', 'justifyright', 'insertorderedlist',
                    'insertunorderedlist', 'link', 'plainpaste', 'image'
                ],
                uploadJson: 'upload',
                fileManagerJson: 'browser',
                //指定后台接收的图片的名称
                filePostName: 'aa',
                allowFileManager: true
            });
        });

        function getContent() {
            //方式一： 取得HTML内容
            var html = editor.html();
            console.log(html);

            //方式二： 同步数据后可以直接取得textarea的value
            //editor.sync();
            //html = document.getElementById('editor_id').value; // 原生API
            //console.log(html);
        }

        function setContent() {
            // 设置HTML内容
            editor.html('333HTML内容111222');
        }
    </script>

</head>
<body>
<!--调用头部公共代码-->
<div th:replace="~{base::header}"></div>

<section style="display: flex;" class="bg-light">
    <!--调用公共的代码片段-->
    <div th:replace="~{base::section_leaf('message2')}" class="bg-light"></div>

    <div class="base_rahit bg-light" style="margin-left: 15px;background-color:#eeeeee;">
        <div style="height: 45px; background-color:#eeeeee;display: flex; justify-content: space-between" class="mt-3">
            <div class=" mt-2">
                <span class="text-muted font-weight-bold mt-5 ml-3 "
                      style="font-size: 20px;margin-top: 5px;">编辑已发布界面</span>
            </div>
        </div>
        <form th:action="@{/main/upmessage_2}" method="post" enctype="multipart/form-data">
            <!-- enctype="multipart/form-data"-->
            <div class="w-100">
                <input type="hidden" name="id" th:value="${message.id}">
                <input type="hidden" name="modifyTime"
                       th:value="${#dates.format(new java.util.Date().getTime(), 'yyyy-MM-dd hh:mm:ss')}">

                <div style="background-color:#eeeeee;display: flex;align-items: center" class="mt-3 mb-3">
                    <span style="text-align: right;margin-left: 60px;width: 80px"><b
                            style="color: red;font-size: 16px;">*</b>标题：</span>
                    <input type="text" name="title" th:value="${message.title}" placeholder="请输入不超过15个字的标题"
                           class="mt-3 mb-3 ml-1">
                </div>
                <div style="display: flex;align-items: center" class="mt-3 mb-3">
                    <span style="width: 80px; text-align: right;margin-left: 62px;"><b
                            style="color: red;font-size: 16px;">*</b>内容：</span>
                    <textarea name="brief" placeholder="请输入不超过1024个汉字的内容" th:text="${message.brief}"
                              style="resize: none;height: 300px;width: 80%" class="mt-3 mb-3" id="editor_id"></textarea>
                </div>
                <div style="background-color:#eeeeee;height: 120px;padding-top: 20px;" id="yida-icon">
                    <span style="width: 80px; text-align: right;margin-left: 44px;" class="mt-3"><b
                            style="color: red;font-size: 16px;">*</b>上传缩虐图：</span>
                    <a id="uploadfile_a2"><input type="file" id="myfile2" name="yida">
                        <spna class="iconfont icon-icon1" id="icon"></spna>
                        <img th:src="${message.thumbnail}" style="width: 60px;height: 60px;" id="yida-my-img"></a>
                    <br>
                    <spna class="mt-1 text-muted mt-3 mb-3" style="font-size: 13px;margin-left: 130px;">
                        提示:单张图片大小不得超过1M
                    </spna>

                </div>
                <div class="mt-3 mb-5">
                    <input type="submit" value="发布" class="btn btn-success text-white" style="margin-left: 142px">
                    <input type="button" value="返回" class=" btn btn-success text-white" onclick="fanhui();">
                </div>
            </div>
        </form>
    </div>
</section>
</body>
<script type="text/javascript" src="../bt4/js/bootstrap.min.js"></script>
<script type="text/javascript" src="../bt4/js/popper.min.js"></script>
<script type="text/javascript" src="../bt4/js/jquery-3.3.1.min.js"></script>
<script type="text/javascript" src="../js/scennic-2.js"></script>
<script type="text/javascript" src="../js/scennic-3.js"></script>
<script type="text/javascript" src="../js/scennic-1.js"></script>
</html>