<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>主页</title>
    <link rel="stylesheet" href="../css/base.css">
    <link rel="stylesheet" href="../css/scennic.css">
    <link rel="stylesheet" href="../css/main.css">
    <link rel="stylesheet" href="../font/iconfont.css">

    <link rel="stylesheet" href="../bt4/css/bootstrap.css">
    <script>
        function fanhui() {
            window.history.back();//返回
        }

        function jiaoyan() {
            var password = $("[name='password']").val();
            if (password == "" || password == null) {
                $("#show_span").text("原密码不能为空");
                showAndHide();
                return false;
            }
            var pwd = $("[name='pwd']").val();
            if (password != pwd) {
                $("#show_span").text("原密码输入错误");
                showAndHide();
                return false;
            }

            var newpassword = $("[name='newpassword']").val();
            if (newpassword == "" || newpassword == null) {
                $("#show_span").text("请输入新密码");
                showAndHide();
                return false;
            }
            var s = newpassword.length;

            var newpasswordtwo = $("[name='newpasswordtwo']").val();
            if (newpasswordtwo == "" || newpasswordtwo == null) {
                $("#show_span").text("确认新密码新密码");
                showAndHide();
                return false;
            }

            var s1 = newpasswordtwo.length;
            if (s != s1) {
                $("#show_span").text("两次输入的新密码不一致");
                showAndHide();
                return false;
            }

            if (newpassword != newpasswordtwo) {
                $("#show_span").text("两次输入的新密码不一致");
                showAndHide();
                return false;
            }

            if (s < 6 && s1 < 6) {
                $("#show_span").text("密码不能低于6位数");
                showAndHide();
                return false;
            }

            alert("更改成功。请重新登录~");
            return true;

        }

        var intervalID = null;

        function showAndHide() {  /*js校验提示框显示*/
            //debugger;
            $("#show_span").fadeIn("slow");

            intervalID = window.setInterval("hidetip();", 3000);//设置一个定时器
        }

        function hidetip() {
            $("#show_span").fadeOut("slow");
            window.clearInterval(intervalID)
        }
    </script>
</head>
<body>
<!--调用头部公共代码-->
<div th:replace="~{base::header}"></div>

<section style="display: flex">
    <!--调用公共的代码片段-->
    <div th:replace="~{base::section_leaf('main')}" class="bg-light"></div>

    <div class="base_rahit bg-light">
        <div class=" mt-3 mb-3">
                <span class="text-muted font-weight-bold mt-5 ml-3 "
                      style="font-size: 20px;margin-top: 5px;">修改密码</span>
        </div>
        <div type="hidden" id="show_span"></div>
        <div class="m-3">
            <form th:action="@{/pwdupdate}" method="post">
                <div>
                    <input type="hidden" th:value="${uid}" name="uid">
                    <input type="hidden" th:value="${pwd}" name="pwd">
                    <div style="background-color:#eeeeee;display: flex;align-items: center" class="mt-3 mb-3">
                    <span style="text-align: right;margin-left: 60px;width: 80px"><b
                            style="color: red;font-size: 16px;">*</b>原密码：</span>
                        <input type="password" name="password" class="mt-3 mb-3 ml-1 w-50">
                    </div>
                    <div style="background-color:#eeeeee;display: flex;align-items: center" class="mt-3 mb-3">
                    <span style="text-align: right;margin-left: 60px;width: 80px"><b
                            style="color: red;font-size: 16px;">*</b>新密码：</span>
                        <input type="password" name="newpassword" class="mt-3 mb-3 ml-1 w-50">
                    </div>
                    <div style="background-color:#eeeeee;display: flex;align-items: center" class="mt-3 mb-3">
                    <span style="text-align: right;margin-left: 60px;width: 80px"><b
                            style="color: red;font-size: 16px;">*</b>确认密码：</span>
                        <input type="password" name="newpasswordtwo" class="mt-3 mb-3 ml-1 w-50">
                    </div>
                    <div class="mt-3 mb-5">
                        <input type="submit" value="修改" class="btn btn-success text-white" style="margin-left: 142px"
                               onclick=" return jiaoyan()">
                        <input type="button" value="返回" class=" btn btn-success text-white" onclick="fanhui();"></a>
                    </div>
                </div>
            </form>
        </div>
</section>

</body>
<script type="text/javascript" src="../bt4/js/bootstrap.min.js"></script>
<script type="text/javascript" src="../bt4/js/popper.min.js"></script>
<script type="text/javascript" src="../bt4/js/jquery-3.3.1.min.js"></script>
</html>